<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Учебный дневник - Портфолио студента</title>
    <meta name="description" content="Мой учебный прогресс и достижения в изучении веб-разработки">
    <link rel="stylesheet" href="../style/styles.css">
    <link rel="icon" href ="https://img.icons8.com/?size=100&id=5J0YM2MKuxZO&format=png&color=000000">
</head>
<body>
    <a href="#main-content" class="sr-only">Перейти к основному содержимому</a>
    
    <div class="page">
        <header class="header" role="banner">
            <div class="container">
                <div class="header__content">
                    <h1 class="header__title">Учебный дневник</h1>
                    <p class="header__subtitle">Отслеживание образовательного прогресса</p>
                </div>
            </div>
        </header>
        
        <nav class="nav" aria-label="Основная навигация">
            <div class="container">
                <ul class="nav__list" role="menubar">
                    <li class="nav__item" role="none">
                        <a href="../index.html" class="nav__link" role="menuitem">Главная</a>
                    </li>
                    <li class="nav__item" role="none">
                        <a href="projects.html" class="nav__link" role="menuitem">Проекты</a>
                    </li>
                    <li class="nav__item nav__item--active" role="none">
                        <a href="diary.html" class="nav__link" role="menuitem" aria-current="page">Дневник</a>
                    </li>
                    <li class="nav__item" role="none">
                        <a href="contacts.html" class="nav__link" role="menuitem">Контакты</a>
                    </li>
                </ul>
            </div>
        </nav>

        <main class="main" id="main-content" role="main">
            <div class="container">
                <h2 class="section-title">Мой учебный прогресс</h2>
                
                <div class="diary__content">
                    <!-- Таймлайн -->
                    <section class="timeline" aria-labelledby="timeline-title">
                        <h3 id="timeline-title" class="courses__title">История обучения</h3>
                        
                        <div class="timeline__item" role="listitem">
                            <div class="timeline__date">15 декабря 2024</div>
                            <div class="timeline__content">
                                <h4 class="timeline__title">Верстка макета сайта</h4>
                                <p class="timeline__description">
                                    Изучение семантической верстки и адаптивного дизайна. Создание макета с использованием Grid и Flexbox.
                                </p>
                                <span class="timeline__status timeline__status--completed" aria-label="Статус: Завершено">
                                    Завершено
                                </span>
                            </div>
                        </div>
                        
                        <!-- Остальные элементы таймлайна с аналогичными улучшениями -->
                        <div class="timeline__item" role="listitem">
                            <div class="timeline__date">10 декабря 2024</div>
                            <div class="timeline__content">
                                <h4 class="timeline__title">JavaScript основы</h4>
                                <p class="timeline__description">
                                    Изучение основ JavaScript: переменные, функции, DOM manipulation, события.
                                </p>
                                <span class="timeline__status timeline__status--completed" aria-label="Статус: Завершено">
                                    Завершено
                                </span>
                            </div>
                        </div>
                    </section>

                    <!-- Текущие курсы -->
                    <section class="courses" aria-labelledby="courses-title">
                        <h3 id="courses-title" class="courses__title">Текущие курсы</h3>
                        
                        <div class="courses__grid" role="list">
                            <div class="course" role="listitem">
                                <div class="course__header">
                                    <span class="course__name">Веб-разработка</span>
                                    <span class="course__percent" aria-label="Прогресс: 90 процентов">90%</span>
                                </div>
                                <div class="course__progress" role="progressbar" aria-valuenow="90" aria-valuemin="0" aria-valuemax="100">
                                    <div class="course__progress-bar" style="width: 90%"></div>
                                </div>
                            </div>
                            
                            <!-- Остальные курсы с аналогичными улучшениями -->
                            <div class="course" role="listitem">
                                <div class="course__header">
                                    <span class="course__name">JavaScript</span>
                                    <span class="course__percent" aria-label="Прогресс: 70 процентов">70%</span>
                                </div>
                                <div class="course__progress" role="progressbar" aria-valuenow="70" aria-valuemin="0" aria-valuemax="100">
                                    <div class="course__progress-bar" style="width: 70%"></div>
                                </div>
                            </div>
                        </div>
                    </section>
                </div>

                <!-- Форма добавления записи -->
                <section class="add-entry" aria-labelledby="add-entry-title">
                    <h3 id="add-entry-title" class="add-entry__title">Добавить новую запись</h3>
                    <form class="add-entry__form" id="diaryForm" novalidate>
                        <div class="form__group">
                            <label for="entryDate" class="form__label required">Дата</label>
                            <input type="date" 
                                   id="entryDate" 
                                   class="form__input" 
                                   required 
                                   aria-required="true"
                                   aria-describedby="date-help">
                            <div id="date-help" class="form__error" role="alert">
                                Пожалуйста, выберите дату
                            </div>
                        </div>
                        
                        <div class="form__group">
                            <label for="entryTitle" class="form__label required">Заголовок</label>
                            <input type="text" 
                                   id="entryTitle" 
                                   class="form__input" 
                                   placeholder="Что вы изучили?" 
                                   required 
                                   aria-required="true"
                                   aria-describedby="title-help">
                            <div id="title-help" class="form__error" role="alert">
                                Пожалуйста, введите заголовок записи
                            </div>
                        </div>
                        
                        <div class="form__group">
                            <label for="entryDescription" class="form__label">Описание</label>
                            <textarea id="entryDescription" 
                                      class="form__textarea" 
                                      rows="3" 
                                      aria-describedby="description-help"
                                      placeholder="Подробное описание..."></textarea>
                            <div id="description-help" class="form__error">
                                Необязательное поле для подробного описания
                            </div>
                        </div>
                        
                        <div class="form__group">
                            <label for="entryStatus" class="form__label required">Статус</label>
                            <select id="entryStatus" 
                                    class="form__input" 
                                    required 
                                    aria-required="true"
                                    aria-describedby="status-help">
                                <option value="">Выберите статус</option>
                                <option value="planned">Запланировано</option>
                                <option value="in-progress">В процессе</option>
                                <option value="completed">Завершено</option>
                            </select>
                            <div id="status-help" class="form__error" role="alert">
                                Пожалуйста, выберите статус
                            </div>
                        </div>
                        
                        <button type="submit" class="button button--primary">
                            Добавить запись
                        </button>
                    </form>
                </section>
            </div>
        </main>

        <footer class="footer" role="contentinfo">
            <div class="container">
                <div class="footer__content">
                    <p class="footer__copyright">&copy; 2025 StudentDev Portfolio</p>
                    <div class="footer__links">
                        <a href="mailto:student@edu.ru" class="footer__link">student@edu.ru</a>
                        <a href="https://github.com" class="footer__link">GitHub</a>
                        <a href="contacts.html" class="footer__link">Контакты</a>
                    </div>
                </div>
            </div>
        </footer>
    </div>

    <!-- Область для динамических сообщений -->
    <div id="diary-announcer" 
         class="sr-only" 
         aria-live="polite" 
         aria-atomic="true">
    </div>

    <script src="../js/scripts.js"></script>
    <script>
        // Уникальный скрипт для страницы дневника
        document.addEventListener('DOMContentLoaded', function() {
            const diaryForm = document.getElementById('diaryForm');
            const announcer = document.getElementById('diary-announcer');

            // Устанавливаем сегодняшнюю дату по умолчанию
            document.getElementById('entryDate').valueAsDate = new Date();

            // Валидация формы в реальном времени
            diaryForm.addEventListener('input', function(e) {
                const target = e.target;
                if (target.hasAttribute('required') && target.value.trim() === '') {
                    target.setAttribute('aria-invalid', 'true');
                } else {
                    target.setAttribute('aria-invalid', 'false');
                }
            });

            // Обработка отправки формы
            diaryForm.addEventListener('submit', function(e) {
                e.preventDefault();
                
                let isValid = true;
                const requiredFields = this.querySelectorAll('[required]');
                
                // Проверка обязательных полей
                requiredFields.forEach(field => {
                    if (!field.value.trim()) {
                        field.setAttribute('aria-invalid', 'true');
                        isValid = false;
                    } else {
                        field.setAttribute('aria-invalid', 'false');
                    }
                });

                if (isValid) {
                    const date = document.getElementById('entryDate').value;
                    const title = document.getElementById('entryTitle').value;
                    const description = document.getElementById('entryDescription').value;
                    const status = document.getElementById('entryStatus').value;
                    
                    // Создаем новую запись
                    const newEntry = document.createElement('div');
                    newEntry.className = 'timeline__item';
                    newEntry.setAttribute('role', 'listitem');
                    
                    // Форматируем дату
                    const formattedDate = new Date(date).toLocaleDateString('ru-RU', {
                        day: 'numeric',
                        month: 'long',
                        year: 'numeric'
                    });
                    
                    // Определяем класс статуса и текст
                    let statusClass = '';
                    let statusText = '';
                    let statusLabel = '';
                    
                    switch(status) {
                        case 'completed':
                            statusClass = 'timeline__status--completed';
                            statusText = 'Завершено';
                            statusLabel = 'Статус: Завершено';
                            break;
                        case 'in-progress':
                            statusClass = 'timeline__status--in-progress';
                            statusText = 'В процессе';
                            statusLabel = 'Статус: В процессе';
                            break;
                        case 'planned':
                            statusClass = 'timeline__status--planned';
                            statusText = 'Запланировано';
                            statusLabel = 'Статус: Запланировано';
                            break;
                    }
                    
                    newEntry.innerHTML = `
                        <div class="timeline__date">${formattedDate}</div>
                        <div class="timeline__content">
                            <h4 class="timeline__title">${title}</h4>
                            <p class="timeline__description">${description}</p>
                            <span class="timeline__status ${statusClass}" aria-label="${statusLabel}">
                                ${statusText}
                            </span>
                        </div>
                    `;
                    
                    // Добавляем новую запись в начало таймлайна
                    const timeline = document.querySelector('.timeline');
                    timeline.insertBefore(newEntry, timeline.children[1]);
                    
                    // Анонсируем добавление для скринридеров
                    announcer.textContent = `Добавлена новая запись: ${title}. Статус: ${statusText}`;
                    
                    // Очищаем форму
                    diaryForm.reset();
                    document.getElementById('entryDate').valueAsDate = new Date();
                    
                    // Фокус на первую поле формы
                    document.getElementById('entryDate').focus();
                    
                    // Показываем визуальное подтверждение
                    setTimeout(() => {
                        if (typeof announceToScreenReader === 'function') {
                            announceToScreenReader(`Запись "${title}" успешно добавлена в дневник`);
                        }
                    }, 100);
                } else {
                    // Фокус на первое поле с ошибкой
                    const firstInvalidField = this.querySelector('[aria-invalid="true"]');
                    if (firstInvalidField) {
                        firstInvalidField.focus();
                    }
                    
                    // Сообщение об ошибке
                    announcer.textContent = 'Пожалуйста, заполните все обязательные поля перед отправкой формы';
                }
            });

            // Анимация прогресс-баров
            const progressBars = document.querySelectorAll('.course__progress-bar');
            progressBars.forEach(bar => {
                const width = bar.style.width;
                bar.style.width = '0';
                setTimeout(() => {
                    bar.style.width = width;
                }, 500);
            });
        });
    </script>
</body>
</html>